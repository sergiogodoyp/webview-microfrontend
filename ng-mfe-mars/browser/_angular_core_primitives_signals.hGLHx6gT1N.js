var k=Object.defineProperty,q=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var y=(e,r,u)=>r in e?k(e,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[r]=u,l=(e,r)=>{for(var u in r||={})$.call(r,u)&&y(e,u,r[u]);if(O)for(var u of O(r))B.call(r,u)&&y(e,u,r[u]);return e},a=(e,r)=>q(e,j(r));function x(e,r){return Object.is(e,r)}var t=null,s=!1,f=1,h=Symbol("SIGNAL");function T(e){let r=t;return t=e,r}function ne(){return t}function H(){return s}function ue(e){return e[h]!==void 0}var I={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function E(e){if(s)throw new Error("");if(t===null)return;t.consumerOnSignalRead(e);let r=t.nextProducerIndex++;if(v(t),r<t.producerNode.length&&t.producerNode[r]!==e&&c(t)){let u=t.producerNode[r];m(u,t.producerIndexOfThis[r])}t.producerNode[r]!==e&&(t.producerNode[r]=e,t.producerIndexOfThis[r]=c(t)?F(e,t,r):0),t.producerLastReadVersion[r]=e.version}function z(){f++}function R(e){if(!(c(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===f)){if(!e.producerMustRecompute(e)&&!L(e)){e.dirty=!1,e.lastCleanEpoch=f;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=f}}function S(e){if(e.liveConsumerNode===void 0)return;let r=s;s=!0;try{for(let u of e.liveConsumerNode)u.dirty||A(u)}finally{s=r}}function w(){return t?.consumerAllowSignalWrites!==!1}function A(e){e.dirty=!0,S(e),e.consumerMarkedDirty?.(e)}function P(e){return e&&(e.nextProducerIndex=0),T(e)}function D(e,r){if(T(r),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(c(e))for(let u=e.nextProducerIndex;u<e.producerNode.length;u++)m(e.producerNode[u],e.producerIndexOfThis[u]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function L(e){v(e);for(let r=0;r<e.producerNode.length;r++){let u=e.producerNode[r],n=e.producerLastReadVersion[r];if(n!==u.version||(R(u),n!==u.version))return!0}return!1}function J(e){if(v(e),c(e))for(let r=0;r<e.producerNode.length;r++)m(e.producerNode[r],e.producerIndexOfThis[r]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function F(e,r,u){if(V(e),e.liveConsumerNode.length===0&&M(e))for(let n=0;n<e.producerNode.length;n++)e.producerIndexOfThis[n]=F(e.producerNode[n],e,n);return e.liveConsumerIndexOfThis.push(u),e.liveConsumerNode.push(r)-1}function m(e,r){if(V(e),e.liveConsumerNode.length===1&&M(e))for(let n=0;n<e.producerNode.length;n++)m(e.producerNode[n],e.producerIndexOfThis[n]);let u=e.liveConsumerNode.length-1;if(e.liveConsumerNode[r]=e.liveConsumerNode[u],e.liveConsumerIndexOfThis[r]=e.liveConsumerIndexOfThis[u],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,r<e.liveConsumerNode.length){let n=e.liveConsumerIndexOfThis[r],i=e.liveConsumerNode[r];v(i),i.producerIndexOfThis[n]=r}}function c(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function v(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function V(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function M(e){return e.producerNode!==void 0}function te(e){let r=Object.create(K);r.computation=e;let u=()=>{if(R(r),E(r),r.value===d)throw r.error;return r.value};return u[h]=r,u}var N=Symbol("UNSET"),C=Symbol("COMPUTING"),d=Symbol("ERRORED"),K=a(l({},I),{value:N,dirty:!0,error:null,equal:x,producerMustRecompute(e){return e.value===N||e.value===C},producerRecomputeValue(e){if(e.value===C)throw new Error("Detected cycle in computations.");let r=e.value;e.value=C;let u=P(e),n;try{n=e.computation()}catch(i){n=d,e.error=i}finally{D(e,u)}if(r!==N&&r!==d&&n!==d&&e.equal(r,n)){e.value=r;return}e.value=n,e.version++}});function Q(){throw new Error}var W=Q;function b(){W()}function oe(e){W=e}var p=null;function ie(e){let r=Object.create(Y);r.value=e;let u=()=>(E(r),r.value);return u[h]=r,u}function se(e){let r=p;return p=e,r}function X(e,r){w()||b(),e.equal(e.value,r)||(e.value=r,Z(e))}function ce(e,r){w()||b(),X(e,r(e.value))}function le(){p?.()}var Y=a(l({},I),{equal:x,value:void 0});function Z(e){e.version++,z(),S(e),p?.()}function ae(e,r,u){let n=Object.create(ee);u&&(n.consumerAllowSignalWrites=!0),n.fn=e,n.schedule=r;let i=o=>{n.cleanupFn=o};function U(o){return o.fn===null&&o.schedule===null}function G(o){U(o)||(J(o),o.cleanupFn(),o.fn=null,o.schedule=null,o.cleanupFn=g)}let _=()=>{if(n.fn===null)return;if(H())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(n.dirty=!1,n.hasRun&&!L(n))return;n.hasRun=!0;let o=P(n);try{n.cleanupFn(),n.cleanupFn=g,n.fn(i)}finally{D(n,o)}};return n.ref={notify:()=>A(n),run:_,cleanup:()=>n.cleanupFn(),destroy:()=>G(n),[h]:n},n.ref}var g=()=>{},ee=a(l({},I),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule!==null&&e.schedule(e.ref)},hasRun:!1,cleanupFn:g});function fe(e){}export{I as REACTIVE_NODE,h as SIGNAL,Y as SIGNAL_NODE,D as consumerAfterComputation,P as consumerBeforeComputation,J as consumerDestroy,A as consumerMarkDirty,L as consumerPollProducersForChange,te as createComputed,ie as createSignal,ae as createWatch,x as defaultEquals,ne as getActiveConsumer,H as isInNotificationPhase,ue as isReactive,E as producerAccessed,z as producerIncrementEpoch,S as producerNotifyConsumers,R as producerUpdateValueVersion,w as producerUpdatesAllowed,le as runPostSignalSetFn,T as setActiveConsumer,fe as setAlternateWeakRefImpl,se as setPostSignalSetFn,oe as setThrowInvalidWriteToSignalError,X as signalSetFn,ce as signalUpdateFn};
/*! Bundled license information:

@angular/core/fesm2022/primitives/signals.mjs:
  (**
   * @license Angular v18.2.13
   * (c) 2010-2024 Google LLC. https://angular.io/
   * License: MIT
   *)
*/
