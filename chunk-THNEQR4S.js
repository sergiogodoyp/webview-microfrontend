import{c as g,d as u,e as v}from"./chunk-CF2I2CH5.js";import{bootstrapApplication as w}from"@angular/platform-browser";import{provideZoneChangeDetection as I}from"@angular/core";import{provideBcpShellRouter as x}from"@bcp/ng-micro-frontends";import*as s from"@angular/core";var c=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=s.\u0275\u0275defineComponent({type:o,selectors:[["app-empty"]],standalone:!0,features:[s.\u0275\u0275StandaloneFeature],decls:0,vars:0,template:function(n,a){},encapsulation:2})};import{RouterOutlet as F}from"@angular/router";import*as r from"@angular/core";var m=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=r.\u0275\u0275defineComponent({type:o,selectors:[["app-solar-system"]],standalone:!0,features:[r.\u0275\u0275StandaloneFeature],decls:3,vars:0,template:function(n,a){n&1&&(r.\u0275\u0275elementStart(0,"h2"),r.\u0275\u0275text(1,"Solar System"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(2,"router-outlet"))},dependencies:[F],encapsulation:2})};var h=[{path:"",redirectTo:"solar-system",pathMatch:"full"},{path:"solar-system",component:m},{path:"**",component:c}];import*as y from"@angular/core";var p=class o{onLoadStart(){console.log("Micro-frontend is starting to load")}onLoadSuccess(){console.log("Micro-frontend has loaded successfully")}onDomInserted(){console.log("Micro-frontend has been inserted into the DOM")}onDomRemoved(){console.log("Micro-frontend has been removed from the DOM")}static \u0275fac=function(n){return new(n||o)};static \u0275prov=y.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})};var C={providers:[I({eventCoalescing:!0}),x({routes:h,options:{useHash:!0,loaderConfig:{layoutsPaths:["solar-system"],providerMap:{}}},lifecycle:p})]};import{inject as S,signal as T}from"@angular/core";import{RouterModule as A,RouterOutlet as E}from"@angular/router";import{CommonModule as R}from"@angular/common";import{inject as D}from"@angular/core";import{BcpTokenEmmiter as b}from"@bcp/ng-micro-frontends";import*as M from"@angular/core";var l=class o{tokenEmmiter=D(b);constructor(){this.tokenEmmiter.onRefreshToken(n=>v(this,[n],function*({respond:t}){let a=yield this.refreshToken();t(a)}))}saveToken(t){this.tokenEmmiter.saveToken(t)}refreshToken(){let t=`hkawop.new.token.${crypto.randomUUID()}`;return this.saveToken(t),Promise.resolve(t)}static \u0275fac=function(n){return new(n||o)};static \u0275prov=M.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"})};import{BcpEventListener as O,BcpEventBusConfig as B}from"@bcp/ng-micro-frontends";import*as d from"@angular/core";var i=class extends O{listen(t){this.on(t)}};u(i,"\u0275fac",(()=>{let t;return function(a){return(t||(t=d.\u0275\u0275getInheritedFactory(i)))(a||i)}})()),u(i,"\u0275prov",d.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})),i=g([B({channel:"mars",topic:"greeting",version:"1"})],i);import*as e from"@angular/core";import*as k from"@angular/common";function j(o,t){if(o&1&&(e.\u0275\u0275elementStart(0,"p",1),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"json"),e.\u0275\u0275elementEnd()),o&2){let n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,n.greetingFromMars()))}}var f=class o{authService=S(l);greetingEventListener=S(i);greetingFromMars=T({name:"",greeting:""});ngOnInit(){this.listenGreetingFromMars()}listenGreetingFromMars(){this.greetingEventListener.listen(({greeting:t,name:n})=>{this.greetingFromMars.set({name:n,greeting:t})})}login(){this.authService.saveToken("token.123.9393")}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-root"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:9,vars:1,consts:[[3,"click"],[1,"greeting-alert"]],template:function(n,a){n&1&&(e.\u0275\u0275elementStart(0,"h1"),e.\u0275\u0275text(1,"Shell - v3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"hr"),e.\u0275\u0275elementStart(3,"button",0),e.\u0275\u0275listener("click",function(){return a.login()}),e.\u0275\u0275text(4,"login"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"hr"),e.\u0275\u0275template(6,j,3,3,"p",1),e.\u0275\u0275element(7,"hr")(8,"router-outlet")),n&2&&(e.\u0275\u0275advance(6),e.\u0275\u0275conditional(a.greetingFromMars().name!==""?6:-1))},dependencies:[E,A,R,k.JsonPipe],styles:["@keyframes _ngcontent-%COMP%_danger-flash{0%,to{background-color:red}50%{background-color:#8b0000}}.greeting-alert[_ngcontent-%COMP%]{background-color:red;color:#fff;font-weight:700;animation:_ngcontent-%COMP%_danger-flash 1s infinite}"]})};w(f,C).catch(o=>console.error(o));
